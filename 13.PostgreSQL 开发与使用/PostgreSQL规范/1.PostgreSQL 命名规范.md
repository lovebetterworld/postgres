文章来源：[diagoal德哥PostgreSQL数据库开发规范]

# 一、命名规范

【强制】库名、表名限制命名长度，建议表名及字段名字符总长度小于等于63。

【强制】对象名（表名、列名、函数名、视图名、序列名、等对象名称）规范，对象名务必只使用小写字母，下划线，数字。不要以pg开头，不要以数字开头，不要使用保留字。
 保留字参考
https://www.postgresql.org/docs/9.5/static/sql-keywords-appendix.html

【强制】query中的别名不要使用 "小写字母，下划线，数字" 以外的字符，例如中文。

【推荐】主键索引应以 pk_ 开头， 唯一索引要以 uk_ 开头，普通索引要以 idx_ 打头。

【推荐】临时表以 tmp_ 开头，子表以规则结尾，例如按年分区的主表如果为tbl, 则子表为tbl_2016，tbl_2017，。。。

【推荐】库名最好以部门名字开头 + 功能，如 xxx_yyy，xxx_zzz，便于辨识， 。。。

【推荐】库名最好与应用名称一致，或便于辨识。

【推荐】不建议使用public schema(不同业务共享的对象可以使用public schema)，应该为每个应用分配对应的schema，schema_name最好与user name一致。

【推荐】comment不要使用中文，因为编码可能不一样，如果存进去和读取时的编码不一致，导致可读性不强。 pg_dump时也必须与comment时的编码一致，否则可能乱码。



# 二、PostgreSQL开发规约

本规则适用于所有对象名，包括：库名、表名、表名、列名、函数名、视图名、序列号名、别名等。

对象名务必只使用小写字母，下划线，数字，但首字母必须为小写字母，常规表禁止以打头。

对象名长度不超过63个字符，命名统一采用。

禁止使用SQL保留字，使用获取保留关键字列表。

禁止出现美元符号，禁止使用中文，不要以开头。

提高用词品味，做到信达雅；不要使用拼音，不要使用生僻冷词，不要使用小众缩写。

## 2.1 【强制】**库命名规则**

库名最好与应用或服务保持一致，必须为具有高区分度的英文单词。

命名必须以开头，为具体业务线名称，如果是分片库必须以结尾。

多个部分使用连接。例如：，等，总共不超过三段。

## 2.2 【强制】**角色命名规范**

数据库有且仅有一个：，用于流复制的用户命名为。

生产用户命名使用作为前缀，具体功能作为后缀。

所有数据库默认有三个基础角色：，，，分别拥有所有表的只读，只写，函数的执行权限。

生产用户，ETL用户，个人用户通过继承相应的基础角色获取权限。

更为精细的权限控制使用独立的角色与用户，依业务而异。

## 2.3 【强制】**模式命名规则**

业务统一使用作为模式名，为业务定义的名称，必须设置为首位元素。

，，为保留模式名。

分片模式命名规则采用：。

无特殊理由不应在其他模式中创建对象。

## 2.4 【推荐】**关系命名规则**

关系命名以表意清晰为第一要义，不要使用含混的缩写，也不应过分冗长，遵循通用命名规则。

表名应当使用复数名词，与历史惯例保持一致，但应尽量避免带有不规则复数形式的单词。

视图以作为命名前缀，物化视图使用作为命名前缀，临时表以作为命名前缀。

继承或分区表应当以父表表名作为前缀，并以子表特性（规则，分片范围等）作为后缀。

## 2.5 【推荐】**索引命名规则**

创建索引时如**有条件**应当指定索引名称，并与PostgreSQL默认命名规则保持一致，避免重复执行时建立重复索引。

用于主键的索引以结尾，唯一索引以结尾，用于约束的索引以结尾，普通索引以结尾。

## 2.6 【推荐】**函数命名规则**

以,,,,打头，表示动作类型。

重要参数可以通过,的后缀在函数名中体现。

避免函数重载，同名函数尽量只保留一个。

禁止通过等整型进行重载，调用时可能产生歧义。

## 2.7 【推荐】**字段命名规则**

不得使用系统列保留字段名：,,,,,等。

主键列通常命名为，或以作为后缀。

创建时间通常命名为，修改时间通常命名为

布尔型字段建议使用，等作为前缀。

其余各字段名需与已有表命名惯例保持一致。

## 2.8 【推荐】**变量命名规则**

存储过程与函数中的变量使用命名参数，而非位置参数。

如果参数名与对象名出现冲突，在参数后添加，例如。

## 2.9 【推荐】**注释规范**

尽量为对象提供注释（），注释使用英文，言简意赅，一行为宜。

对象的模式或内容语义发生变更时，务必一并更新注释，与实际情况保持同步。
